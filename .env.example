# ============================================
# Multi-Agent Orchestration Platform
# Environment Configuration Template
# ============================================
#
# SECURITY WARNING:
# This file contains example values. YOU MUST change all passwords
# and credentials before deploying to production.
#
# NEVER commit .env files to version control!
# This file (.env.example) is a template only.
#
# To use:
# 1. Copy this file: cp .env.example .env
# 2. Replace ALL placeholder values with secure credentials
# 3. Ensure .env is in your .gitignore (it already should be)
#
# Generate secure passwords with:
#   openssl rand -base64 32
#
# ============================================

# ============================================
# Database Configuration
# ============================================
# PostgreSQL connection settings
# REQUIRED: Set secure password before running docker-compose
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=agentrunner
POSTGRES_USER=agentrunner
# SECURITY: Generate secure password with: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD

# Database connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ============================================
# Redis Configuration
# ============================================
# Redis connection settings
# NOTE: Redis password is optional for development but REQUIRED for production
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis TTL settings (in seconds)
REDIS_STATE_TTL=3600  # 1 hour
REDIS_CACHE_TTL=300   # 5 minutes

# ============================================
# RabbitMQ Configuration
# ============================================
# RabbitMQ connection settings
# REQUIRED: Set secure credentials before running docker-compose
# SECURITY: Never use default 'guest' credentials in production
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=agentrunner
# SECURITY: Generate secure password with: openssl rand -base64 32
RABBITMQ_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD
RABBITMQ_VHOST=/

# RabbitMQ message settings
RABBITMQ_EXCHANGE=agent_events
RABBITMQ_EXCHANGE_TYPE=topic
RABBITMQ_PREFETCH_COUNT=1

# ============================================
# LLM Provider Credentials
# ============================================

# AWS Bedrock (for Claude, Llama, Titan models)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
AWS_BEDROCK_MODEL_ID=anthropic.claude-3-sonnet-20240229-v1:0

# OpenAI (for GPT-4, GPT-3.5 models)
OPENAI_API_KEY=your_openai_api_key
OPENAI_ORG_ID=your_openai_org_id  # Optional

# Anthropic (for direct Claude API access)
ANTHROPIC_API_KEY=your_anthropic_api_key

# Ollama (for local models)
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=llama2  # Default model

# ============================================
# Portia AI SDK Configuration
# ============================================
PORTIA_API_KEY=your_portia_api_key
PORTIA_API_URL=https://api.portia.ai/v1

# ============================================
# Slack Integration
# ============================================
# Slack webhook configuration
SLACK_SIGNING_SECRET=your_slack_signing_secret
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_APP_TOKEN=xapp-your-slack-app-token

# SlackGateway service settings
SLACK_GATEWAY_PORT=8005
SLACK_GATEWAY_HOST=0.0.0.0
SLACK_MAX_RETRY_ATTEMPTS=3
SLACK_RETRY_DELAY=1
ENVIRONMENT=production

# ============================================
# Celery Configuration
# ============================================
# Celery broker settings (uses RabbitMQ)
CELERY_BROKER_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASSWORD}@${RABBITMQ_HOST}:${RABBITMQ_PORT}/${RABBITMQ_VHOST}
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/1

# Celery task settings
CELERY_TASK_SOFT_TIME_LIMIT=300  # 5 minutes
CELERY_TASK_TIME_LIMIT=330  # 5.5 minutes
CELERY_TIMEZONE=UTC
TASK_TIMEOUT_SECONDS=300

# ============================================
# Application Configuration
# ============================================
# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json  # Options: json, text
ENABLE_TRACE_ID=true

# Agent Orchestrator
AGENT_CONFIG_DIR=/app/config/agents
AGENT_HEALTH_CHECK_INTERVAL=60  # seconds
AGENT_RESTART_MAX_ATTEMPTS=3
AGENT_SHUTDOWN_TIMEOUT=30  # seconds

# State Manager
STATE_COMPRESSION_THRESHOLD=1048576  # 1MB in bytes
STATE_RETENTION_DAYS=30

# Continuous Agents
CONTINUOUS_AGENT_IDLE_TIMEOUT=600  # 10 minutes

# ============================================
# Docker Compose Settings
# ============================================
# Service ports (for development/testing)
STATE_MANAGER_PORT=8001
CONFIG_SERVICE_PORT=8002
ORCHESTRATOR_PORT=8003
SCHEDULER_SERVICE_PORT=8004
SLACK_GATEWAY_PORT=8005

# ============================================
# Feature Flags
# ============================================
ENABLE_HOT_RELOAD=true
ENABLE_HEALTH_CHECKS=true
ENABLE_METRICS=false  # Reserved for future Prometheus integration
ENABLE_DISTRIBUTED_TRACING=false  # Reserved for future integration

# ============================================
# Security Settings
# ============================================
# Enable TLS for production
ENABLE_TLS=false
TLS_CERT_PATH=/app/certs/tls.crt
TLS_KEY_PATH=/app/certs/tls.key

# API authentication (reserved for future use)
ENABLE_API_AUTH=false
API_SECRET_KEY=generate_a_secure_random_key_here
